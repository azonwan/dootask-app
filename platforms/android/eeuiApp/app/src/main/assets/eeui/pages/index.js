// { "framework": "Vue"} 
if("undefined"==typeof app&&(app=weex),void 0===eeuiLog)var eeuiLog={_:function(t,e){var i=e.map((function(t){return"[object object]"===Object.prototype.toString.call(t).toLowerCase()?JSON.stringify(t):t}));void 0===this.__m&&(this.__m=app.requireModule("debug")),this.__m.addLog(t,i)},debug:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this._("debug",t)},log:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this._("log",t)},info:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this._("info",t)},warn:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this._("warn",t)},error:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this._("error",t)}};!function(t){var e={};function i(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(o,s,function(e){return t[e]}.bind(null,s));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=5)}([function(t,e){t.exports={mask:{position:"fixed",overflow:"hidden",backgroundColor:"#FFFFFF"},"render-views":{flexWrap:"wrap",flexDirection:"row",justifyContent:"space-between"},"grid-item":{width:"350",height:"350",alignItems:"center"},"status-indicator":{position:"absolute",width:"20",height:"20",borderRadius:"10",bottom:"6",right:"6",backgroundColor:"#FFFFFF"},"sub-status-indicator":{width:"16",height:"16",borderRadius:"8",marginTop:"2",marginLeft:"2"},local:{width:"320",height:"320",borderRadius:"16",overflow:"hidden"},hidden:{marginTop:"15",marginLeft:"15",overflow:"hidden"},button:{marginLeft:"15",backgroundColor:"rgb(20,172,78)",paddingTop:"12",paddingRight:"32",paddingBottom:"12",paddingLeft:"32",borderRadius:"8"},switch:{marginTop:"850",marginLeft:"-420"},silence:{marginTop:"850",marginLeft:"0"},loudly:{marginTop:"850",marginLeft:"320"},shut:{marginLeft:"420"},hide:{marginTop:"1100",marginLeft:"100"},content:{fontSize:"40",color:"#808080"}}},function(t,e,i){"use strict";i.r(e);var o=app.requireModule("eeuiAgoro");app.requireModule("eeui");e.default={name:"meetings",data:function(){return{title:"",uuids:[],uuid:0,meetingid:0,mini:!1,showShow:!1,video:!1,audio:!1,infos:[],screenH:WXEnvironment.deviceHeight/WXEnvironment.deviceWidth*750,bottomPos:100,rightPos:0,isTouch:!1,startPosX:0,startPosY:0,bottomShow:!0,bottomColor:"white"}},computed:{videoStyle:function(){var t={};return this.mini?(t.width="182px",t.height="80px",t.right=this.rightPos+"px",t.bottom=this.bottomPos+"px",t.borderRadius="8px",t.borderWidth="2px",t.borderColor="#D9E2E9"):(t.top="0px",t.bottom="0px",t.right="0px",t.left="0px"),t}},methods:{initAgoro:function(t){var e=this;o.initialWithParam({id:t},(function(t){var i=t.uuid;if("joint"==t.action){for(var o=!0,s="",a=0;a<e.uuids.length;a++){e.uuids[a].uuid==i&&(o=!1)}e.infos.map((function(t){return t.uuid==e.uuids&&(s=t.avatar),t})),1==o&&(e.uuids.push({uuid:i,audio:!1,video:!1,videoStatus:0,audioStatus:0,avatar:s}),e.infoParam(i))}else"leave"==t.action&&(e.uuids=e.uuids.filter((function(t){return t.uuid!=i})))})),o.statusCallback((function(t){if(eeuiLog.info("statsParam:",t),"me"===t.uuid)"video"===t.type?(e.uuids[0]&&(e.uuids[0].video=1==t.status||2==t.status||3==t.status),e.uuids[0]&&(e.uuids[0].videoStatus=t.status)):(e.uuids[0]&&(e.uuids[0].audio=1==t.status||2==t.status||3==t.status),e.uuids[0]&&(e.uuids[0].audioStatus=t.status));else{var i=t.uuid;e.uuids=e.uuids.map((function(e){return e.uuid==i?"video"===t.type?(e.videoStatus=t.status,e.video=1==t.status||2==t.status||3==t.status,e):(e.audioStatus=t.status,e.audio=1==t.status||2==t.status||3==t.status,e):e}))}})),o.localStatusCallback((function(t){-1==t?(e.destroyed(),e.uuids=[]):5==t&&e.errorParam(e.uuid)}))},destroyed:function(){o.destroy(),this.showShow=!1,this.infos=[],this.uuids=[],this.title="";var t={act:"endMeeting",uuid:this.uuid+""};this.callbackParam(t)},exitAction:function(){o.leaveChannel(),this.showShow=!1},joint:function(t){var e=this;eeuiLog.info("joint:"),eeuiLog.info(t);var i=t.appid;this.initAgoro(i),this.video=t.video,this.audio=t.audio,setTimeout((function(){o.jointChanel(t,(function(i){e.uuid=i.uuid,e.meetingid=t.meetingid,e.title=t.name;e.infos.map((function(t){return t.uuid==e.uuid&&t.avatar,t})),e.uuids.push({uuid:e.uuid,audio:t.audio,video:t.video,videoStatus:0,audioStatus:0,avatar:t.avatar}),eeuiLog.info("afterjoint:"),eeuiLog.info(e.uuids),e.successParam(e.uuid),e.showShow=!0,e.mini=!1,t.video||o.enableVideo(t.video),o.enableAudio(t.audio)}))}),500)},zoomClick:function(){var t=this;this.isTouch||(this.mini=!1,this.bottomShow=!1,this.$nextTick((function(){t.bottomShow=!0})))},miniClick:function(){this.mini=!0,this.bottomPos<0&&(this.bottomPos=100),this.rightPos<0&&(this.rightPos=0)},videoEnable:function(){this.video=!this.video,o.enableVideo(this.video)},audioEnable:function(){this.audio=!this.audio,o.enableAudio(this.audio)},invent:function(){this.mini=!0;var t={act:"invent",meetingid:this.meetingid+""};this.callbackParam(t)},infoParam:function(t){var e={act:"getInfo",uuid:t+""};this.callbackParam(e)},successParam:function(t){var e={act:"success",uuid:t+""};this.callbackParam(e)},errorParam:function(t){var e={act:"error",uuid:t+""};this.callbackParam(e)},callbackParam:function(t){this.$emit("meetingEvent",t)},switchClicked:function(){o.switchCamera()},silenceClicked:function(t){},remoteSlicent:function(t){o.muteRemoteAudioStream(t.uuids,!t.mute)},remoteVideo:function(t){o.muteRemoteVideoStream(t.uuids,!t.mute)},loudlyClicked:function(){},shutClicked:function(){o.leaveChannel()},hideClicked:function(){this.miniClick()},load:function(t){var e=this,i=t.target.attr.uuid;i!==this.uuid?o.blindRemote(i):this.$nextTick((function(){o.blindLocal(e.uuid)}))},getStatus:function(t,e){var i={};return i.backgroundColor=t>2||e>2?"#f28500":"#00ff00",i},updateMeetingInfo:function(t){this.infos.push(t),this.updateUidInfo()},updateUidInfo:function(){var t=this;0!=this.infos.length&&(this.uuids=this.uuids.map((function(e){for(var i=0;i<t.infos.length;i++){var o=t.infos[i];o.uuid==e.uuid&&(e.username=o.username,e.avatar=o.avatar)}return e})))},touchstart:function(t){1==this.mini&&(this.startPosX=750-t.changedTouches[0].screenX-this.rightPos,this.startPosY=this.screenH-t.changedTouches[0].screenY-this.bottomPos)},touchAction:function(t){1==this.mini&&(this.isTouch=!0,this.rightPos=750-t.changedTouches[0].screenX-this.startPosX,this.bottomPos=this.screenH-t.changedTouches[0].screenY-this.startPosY)},touchend:function(){this.isTouch=!1,1==this.mini&&(this.startPosX=0,this.startPosY=0)}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showShow?i("div",{staticClass:["mask"],style:t.videoStyle},[i("div",{staticStyle:{padding:"16px",flex:"1",backgroundColor:"white"}},[i("text",{staticStyle:{fontSize:"30px",padding:"16px"}},[t._v(t._s(t.title))]),i("div",{staticClass:["render-views"]},t._l(t.uuids,(function(e){return i("div",{staticClass:["grid-item"]},[i("div",{staticClass:["local","hidden"]},[i("eeuiAgoro-com",{ref:"local",refInFor:!0,staticClass:["local"],attrs:{uuid:e.uuid},on:{load:t.load}})],1),0==e.videoStatus?i("image",{staticStyle:{position:"absolute",top:"15px",left:"15px",right:"5px",bottom:"15px",borderRadius:"16px",flexDirection:"row",backgroundColor:"#00A77D"},attrs:{src:e.avatar}}):t._e(),i("div",{staticStyle:{position:"absolute",top:"16px",right:"10px",flexDirection:"row"}},[e.video?t._e():i("image",{staticStyle:{width:"40px",height:"40px",marginRight:"12px"},attrs:{src:"root://pages/assets/images/meeting_video_err.png"}}),e.audio?t._e():i("image",{staticStyle:{width:"40px",height:"40px",marginRight:"12px"},attrs:{src:"root://pages/assets/images/meeting_audio_err.png"}})]),i("div",{staticStyle:{position:"absolute",bottom:"0px",right:"0px",width:"80px",height:"80px",borderRadius:"40px",backgroundColor:"white",overflow:"hidden"}},[i("image",{staticStyle:{width:"70px",height:"70px",marginTop:"5px",marginLeft:"5px",borderRadius:"35px",backgroundColor:"greenyellow"},attrs:{src:e.avatar}})]),i("div",{staticClass:["status-indicator"]},[i("div",{staticClass:["sub-status-indicator"],style:t.getStatus(e.audioStatus,e.videoStatus)})])])}))),i("div",{staticStyle:{flex:"1"}}),i("div",{staticStyle:{position:"absolute",bottom:"0px",right:"0px",left:"0px",height:"80px"}},[i("div",{staticStyle:{flexWrap:"wrap",flexDirection:"row",justifyContent:"space-between",backgroundColor:"white",marginLeft:"16px",marginRight:"16px"}},[i("div",{staticClass:["button"],on:{click:t.videoEnable}},[i("image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.video?"root://pages/assets/images/meeting_video_on.png":"root://pages/assets/images/meeting_video_off.png"}})]),i("div",{staticClass:["button"],on:{click:t.audioEnable}},[i("image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.audio?"root://pages/assets/images/meeting_audio_on.png":"root://pages/assets/images/meeting_audio_off.png"}})]),i("div",{staticClass:["button"],on:{click:t.switchClicked}},[i("image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:"root://pages/assets/images/meeting_camera_reverse.png"}})]),i("div",{staticClass:["button"],on:{click:t.invent}},[i("image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:"root://pages/assets/images/meeting_invent.png"}})]),i("div",{staticClass:["button"],on:{click:t.hideClicked}},[i("image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:"root://pages/assets/images/meeting_mini.png"}})]),i("div",{staticClass:["button"],style:{backgroundColor:"#f28500"},on:{click:t.exitAction}},[i("image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:"root://pages/assets/images/meeting_exit.png"}})])])]),t.mini?i("div",{staticStyle:{flexDirection:"row",position:"absolute",justifyContent:"right",backgroundColor:"white",top:"0",left:"0",right:"0",bottom:"0"},on:{click:function(e){t.zoomClick(!1)},touchstart:t.touchstart,touchmove:t.touchAction,touchend:t.touchend}},[i("div",{staticStyle:{padding:"12px",alignSelf:"center",marginLeft:"22px"}},[i("image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.video?"root://pages/assets/images/meeting_black_video_on.png":"root://pages/assets/images/meeting_black_video_off.png"}})]),i("div",{staticStyle:{padding:"12px",alignSelf:"center",marginLeft:"4px"}},[i("image",{staticStyle:{width:"40px",height:"40px",alignSelf:"center"},attrs:{src:t.audio?"root://pages/assets/images/meeting_black_audio_on.png":"root://pages/assets/images/meeting_black_audio_off.png"}})])]):t._e()])]):t._e()},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,i){var o,s,a=[];a.push(i(0)),o=i(1);var n=i(2);s=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(Object.keys(o).some((function(t){return"default"!==t&&"__esModule"!==t}))&&console.error("named exports are not supported in *.vue files."),s=o=o.default),"function"==typeof s&&(s=s.options),s.__file="/Users/WEIYI/wwwroot/dootask/resources/mobile/src/pages/compoment/meetings.vue",s.render=n.render,s.staticRenderFns=n.staticRenderFns,s._scopeId="data-v-41e78e26",s.style=s.style||{},a.forEach((function(t){for(var e in t)s.style[e]=t[e]})),"function"==typeof __register_static_styles__&&__register_static_styles__(s._scopeId,a),t.exports=o},,function(t,e,i){var o,s,a=[];a.push(i(6)),o=i(7);var n=i(8);s=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(Object.keys(o).some((function(t){return"default"!==t&&"__esModule"!==t}))&&console.error("named exports are not supported in *.vue files."),s=o=o.default),"function"==typeof s&&(s=s.options),s.__file="/Users/WEIYI/wwwroot/dootask/resources/mobile/src/pages/index.vue",s.render=n.render,s.staticRenderFns=n.staticRenderFns,s._scopeId="data-v-57509004",s.style=s.style||{},a.forEach((function(t){for(var e in t)s.style[e]=t[e]})),"function"==typeof __register_static_styles__&&__register_static_styles__(s._scopeId,a),t.exports=o,t.exports.el="true",new Vue(t.exports)},function(t,e){t.exports={flex:{flex:1}}},function(t,e,i){"use strict";i.r(e);var o=i(3),s=i.n(o),a=app.requireModule("eeui"),n=app.requireModule("eeuiDeviceInfo"),r=app.requireModule("eeuiUmengPush"),u=app.requireModule("eeuiCommunication"),d=app.requireModule("eeuiNotifications"),c=app.requireModule("eeuiPicture"),l=app.requireModule("eeuiShareFiles");e.default={components:{Meetings:s.a},data:function(){return{uniqueId:"",resumeNum:0,umengInit:!1,umengMessage:{},umengError:!1,appGroupID:"group.im.dootask",appSubPath:"share"}},pageResume:function(){var t='if (typeof window.__onPageResume === "function"){window.__onPageResume('.concat(this.resumeNum,")}");this.$refs.web.setJavaScript(t),this.resumeNum++,this.refreshNotificationPermission(),this.umengError&&this.updateUmengAlias()},pagePause:function(){this.$refs.web.setJavaScript('if (typeof window.__onPagePause === "function"){window.__onPagePause()}')},pageMessage:function(t){var e=t.message;switch(e.messageType){case"notificationClick":break;case"keyboardStatus":var i=encodeURIComponent(this.jsonStringify(e)),o='if (typeof window.__onKeyboardStatus === "function"){window.__onKeyboardStatus("'.concat(i,'")}');this.$refs.web.setJavaScript(o)}},mounted:function(){"ios"===WXEnvironment.platform.toLowerCase()&&l.shareFileWithGroupID(this.appGroupID,this.appSubPath),this.uniqueId=a.getCachesString("appUniqueId",""),this.count(this.uniqueId)<5&&(this.uniqueId=this.randomString(6),a.setCachesString("appUniqueId",this.uniqueId,0)),a.setStatusBarStyle(!1),this.$refs.web.setUrl(a.rewriteUrl("../public/index.html"))},computed:{},methods:{time:function(){return Math.round((new Date).getTime()/1e3)},onReceiveMessage:function(t){var e=t.message;switch(e.action){case"intiUmeng":this.umengInit||(this.umengInit=!0,r.initialize());break;case"setUmengAlias":this.umengMessage=e,this.updateUmengAlias();break;case"setVibrate":var i=this.runNum(e.time);i>0?n.setVibrate(i):n.setVibrate();break;case"getNotificationPermission":this.refreshNotificationPermission();break;case"setBdageNotify":d.setBadge(this.runNum(e.bdage));break;case"gotoSetting":d.gotoSet();break;case"callTel":u.call(e.tel);break;case"picturePreview":c.picturePreview(e.position,e.paths);break;case"videoPreview":c.videoPreview(e.path);break;case"userChatList":"ios"===WXEnvironment.platform.toLowerCase()?l.setShareStorage("chatList",e.url):a.setCaches("chatList",e.url,0);break;case"userUploadUrl":"ios"===WXEnvironment.platform.toLowerCase()?(l.setShareStorage("upLoadUrl",e.chatUrl),l.setShareStorage("fileUpLoadUrl",e.dirUrl)):(a.setCaches("upLoadUrl",e.chatUrl,0),a.setCaches("fileUpLoadUrl",e.dirUrl,0));break;case"startMeeting":this.$refs.meeting&&this.$refs.meeting.joint(e.meetingParams);break;case"updateMeetingInfo":this.$refs.meeting&&this.$refs.meeting.updateMeetingInfo(e.infos)}},onStateChanged:function(t){var e=t.status,i=t.url;switch(e){case"createTarget":a.openPage({pageType:"app",pageTitle:" ",url:"web.js",params:{url:i,browser:!0,showProgress:!0}},(function(t){}))}},updateUmengAlias:function(){var t=this,e="".concat(WXEnvironment.platform,"-").concat(this.umengMessage.userid,"-").concat(this.uniqueId);eeuiLog.log("[UmengAlias] delete: "+e),r.deleteAlias(e,"userid",(function(i){eeuiLog.log("[UmengAlias] delete result: "+JSON.stringify(i)),eeuiLog.log("[UmengAlias] add: "+e),r.addAlias(e,"userid",(function(i){eeuiLog.log("[UmengAlias] add result: "+JSON.stringify(i)),"success"===i.status?(eeuiLog.log("[UmengAlias] add success"),a.ajax({url:t.umengMessage.url,method:"get",data:{alias:e},headers:{token:t.umengMessage.token}},(function(t){eeuiLog.log(t)}))):eeuiLog.log("[UmengAlias] add error"),t.umengError="success"!==i.status}))}))},refreshNotificationPermission:function(){var t=this;d.getPermissionStatus((function(e){var i='if (typeof window.__onPagePause === "function"){window.__onNotificationPermissionStatus('.concat(e,")}");t.$refs.web.setJavaScript(i)}))},meetingEvent:function(t){if("invent"!=t.act){var e='if (typeof window.__onMeetingEvent === "function"){window.__onMeetingEvent({"uuid":"'.concat(t.uuid,'","act":"').concat(t.act,'"})}');this.$refs.web.setJavaScript(e)}else this.inventEvent(t)},inventEvent:function(t){var e='if (typeof window.__onMeetingEvent === "function"){window.__onMeetingEvent({"meetingid":"'.concat(t.meetingid,'","act":"').concat(t.act,'"})}');this.$refs.web.setJavaScript(e)}}}},function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:["flex"]},[e("web-view",{ref:"web",staticClass:["flex"],attrs:{hiddenDone:!0,progressbarVisibility:!1,allowFileAccessFromFileURLs:!0},on:{receiveMessage:this.onReceiveMessage,stateChanged:this.onStateChanged}}),e("meetings",{ref:"meeting",on:{meetingEvent:this.meetingEvent}})],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}]);
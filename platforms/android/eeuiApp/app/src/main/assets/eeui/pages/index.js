// { "framework": "Vue"} 
if("undefined"==typeof app&&(app=weex),void 0===eeuiLog)var eeuiLog={_:function(e,t){var i=t.map((function(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()?JSON.stringify(e):e}));void 0===this.__m&&(this.__m=app.requireModule("debug")),this.__m.addLog(e,i)},debug:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];this._("debug",e)},log:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];this._("log",e)},info:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];this._("info",e)},warn:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];this._("warn",e)},error:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];this._("error",e)}};!function(e){var t={};function i(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(s,o,function(t){return e[t]}.bind(null,o));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=5)}([function(e,t){e.exports={mask:{position:"fixed",overflow:"hidden",backgroundColor:"#FFFFFF"},"render-views":{flexWrap:"wrap",flexDirection:"row",justifyContent:"space-between"},"grid-item":{width:"350",height:"350",alignItems:"center",borderRadius:"16",overflow:"hidden"},"status-indicator":{position:"absolute",width:"18",height:"18",borderRadius:"9",bottom:"18",right:"18",backgroundColor:"#FFFFFF"},"sub-status-indicator":{width:"14",height:"14",borderRadius:"7",marginTop:"2",marginLeft:"2"},local:{width:"350",height:"350",borderRadius:"16"},button:{marginLeft:"15",backgroundColor:"rgb(20,172,78)",paddingTop:"12",paddingRight:"32",paddingBottom:"12",paddingLeft:"32",borderRadius:"8"},switch:{marginTop:"850",marginLeft:"-420"},silence:{marginTop:"850",marginLeft:"0"},loudly:{marginTop:"850",marginLeft:"320"},shut:{marginLeft:"420"},hide:{marginTop:"1100",marginLeft:"100"},content:{fontSize:"40",color:"#808080"}}},function(e,t,i){"use strict";i.r(t);var s=app.requireModule("eeuiAgoro");app.requireModule("eeui");t.default={name:"meetings",data:function(){return{title:"Hello, World!",uuids:[],uuid:0,mini:!1,showShow:!0,video:!1,audio:!1,infos:[]}},computed:{videoStyle:function(){var e={};return this.mini?(e.width="300px",e.height="100px",e.right="0px",e.bottom="100px"):(e.top="0px",e.bottom="0px",e.right="0px",e.left="0px"),e}},methods:{initAgoro:function(e){var t=this;s.initialWithParam({id:e},(function(e){var i=e.uuid;if("joint"==e.action){for(var s=!0,o="",n=0;n<t.uuids.length;n++){t.uuids[n].uuid==i&&(s=!1)}t.infos.map((function(e){return e.uuid==t.uuids&&(o=e.avatar),e})),1==s&&t.uuids.push({uuid:i,audio:!1,video:!1,videoStatus:0,audioStatus:0,avatar:o})}else"leave"==e.action&&(t.uuids=t.uuids.filter((function(e){return e.uuid!=i})))})),s.statusCallback((function(e){if(eeuiLog.info("statsParam:",e),"me"===e.uuid)"video"===e.type?(t.uuids[0]&&(t.uuids[0].video=1==e.status||2==e.status||3==e.status),t.uuids[0]&&(t.uuids[0].videoStatus=e.status)):(t.uuids[0]&&(t.uuids[0].audio=1==e.status||2==e.status||3==e.status),t.uuids[0]&&(t.uuids[0].audioStatus=e.status));else{var i=e.uuid;t.uuids=t.uuids.map((function(t){return t.uuid==i?"video"===e.type?(t.videoStatus=e.status,t.video=1==e.status||2==e.status||3==e.status,t):(t.audioStatus=e.status,t.audio=1==e.status||2==e.status||3==e.status,t):t}))}})),s.localStatusCallback((function(e){-1==e&&(t.destroyed(),t.uuids=[])}))},destroyed:function(){s.destroy(),this.showShow=!1,this.infos=[],this.$emit("endMeeting","")},exitAction:function(){s.leaveChannel()},joint:function(e){var t=this,i=e.appid;this.initAgoro(i),this.video=e.video,this.audio=e.audio,setTimeout((function(){s.jointChanel(e,(function(i){t.showShow=!0,t.mini=!1,t.uuid=i.uuid;var o="";t.infos.map((function(e){return e.uuid==t.uuids&&(o=e.avatar),e})),t.uuids.push({uuid:t.uuid,audio:e.audio,video:e.video,videoStatus:0,audioStatus:0,avatar:o}),e.video||s.enableVideo(e.video),s.enableAudio(e.audio)}))}),500)},zoomClick:function(){this.mini=!1},miniClick:function(){this.mini=!0},videoEnable:function(){this.video=!this.video,s.enableVideo(this.video)},audioEnable:function(){this.audio=!this.audio,s.enableAudio(this.audio)},invent:function(){this.mini=!0,this.$emit("invent")},switchClicked:function(){s.switchCamera()},silenceClicked:function(e){},remoteSlicent:function(e){s.muteRemoteAudioStream(e.uuids,!e.mute)},remoteVideo:function(e){s.muteRemoteVideoStream(e.uuids,!e.mute)},loudlyClicked:function(){},shutClicked:function(){s.leaveChannel()},hideClicked:function(){this.miniClick()},load:function(e){var t=this;eeuiLog.info(e);var i=e.target.attr.uuid;i!==this.uuid?s.blindRemote(i):this.$nextTick((function(){s.blindLocal(t.uuid)}))},getStatus:function(e,t){var i={};return i.backgroundColor=e>2||t>2?"#f28500":"#00ff00",i},updateMeetingInfo:function(e){this.infos=e}}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.showShow?i("div",{staticClass:["mask"],style:e.videoStyle,on:{click:function(t){e.zoomClick(!1)}}},[i("div",{staticStyle:{padding:"16px",flex:"1",backgroundColor:"white"}},[i("div",{staticClass:["render-views"]},e._l(e.uuids,(function(t){return i("div",{staticClass:["grid-item"]},[i("eeuiAgoro-com",{ref:"local",refInFor:!0,staticClass:["local"],attrs:{uuid:t.uuid},on:{load:e.load}}),0==t.videoStatus?i("image",{staticStyle:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",flexDirection:"row",backgroundColor:"#00A77D"},attrs:{src:t.avatar}}):e._e(),i("div",{staticStyle:{position:"absolute",top:"5px",right:"10px",flexDirection:"row"}},[t.video?e._e():i("image",{staticStyle:{width:"40px",height:"40px",marginRight:"12px"},attrs:{src:"root://pages/assets/images/meeting_video_err.png"}}),t.audio?e._e():i("image",{staticStyle:{width:"40px",height:"40px",marginRight:"12px"},attrs:{src:"root://pages/assets/images/meeting_audio_err.png"}})]),i("div",{staticStyle:{position:"absolute",bottom:"4px",right:"4px",width:"80px",height:"80px",borderRadius:"40px",overflow:"hidden"}},[i("image",{staticStyle:{width:"80px",height:"80px",borderRadius:"40px",backgroundColor:"white"},attrs:{src:t.avatar}}),i("div",{staticClass:["status-indicator"]},[i("div",{staticClass:["sub-status-indicator"],style:e.getStatus(t.audioStatus,t.videoStatus)})])])],1)}))),i("div",{staticStyle:{flex:"1"}}),i("div",{staticStyle:{flexWrap:"wrap",flexDirection:"row",backgroundColor:"white"}},[i("div",{staticClass:["button"],on:{click:e.videoEnable}},[i("image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:e.video?"root://pages/assets/images/meeting_video_on.png":"root://pages/assets/images/meeting_video_off.png"}})]),i("div",{staticClass:["button"],on:{click:e.audioEnable}},[i("image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:e.audio?"root://pages/assets/images/meeting_audio_on.png":"root://pages/assets/images/meeting_audio_off.png"}})]),i("div",{staticClass:["button"],on:{click:e.invent}},[i("image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:"root://pages/assets/images/meeting_invent.png"}})]),i("div",{staticClass:["button"],on:{click:e.hideClicked}},[i("image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:"root://pages/assets/images/meeting_mini.png"}})]),i("div",{staticClass:["button"],style:{backgroundColor:"#f28500"},on:{click:e.exitAction}},[i("image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:"root://pages/assets/images/meeting_exit.png"}})])]),e.mini?i("div",{staticStyle:{flexDirection:"row",position:"absolute",justifyContent:"right",backgroundColor:"white",top:"0",left:"0",right:"0",bottom:"0"}},[i("div",{staticStyle:{padding:"12px",alignSelf:"center"}},[i("image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:e.video?"root://pages/assets/images/meeting_black_video_on.png":"root://pages/assets/images/meeting_black_video_off.png"}})]),i("div",{staticStyle:{padding:"12px",alignSelf:"center"}},[i("image",{staticStyle:{width:"40px",height:"40px",alignSelf:"center"},attrs:{src:e.audio?"root://pages/assets/images/meeting_black_audio_on.png":"root://pages/assets/images/meeting_black_audio_off.png"}})]),i("div",{staticStyle:{padding:"12px",alignSelf:"center"}},[i("text",{staticStyle:{alignSelf:"center",fontSize:"24px"}},[e._v(e._s("会议中"))])])]):e._e()])]):e._e()},staticRenderFns:[]},e.exports.render._withStripped=!0},function(e,t,i){var s,o,n=[];n.push(i(0)),s=i(1);var a=i(2);o=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(Object.keys(s).some((function(e){return"default"!==e&&"__esModule"!==e}))&&console.error("named exports are not supported in *.vue files."),o=s=s.default),"function"==typeof o&&(o=o.options),o.__file="/Users/WEIYI/wwwroot/dootask/resources/mobile/src/pages/compoment/meetings.vue",o.render=a.render,o.staticRenderFns=a.staticRenderFns,o._scopeId="data-v-41e78e26",o.style=o.style||{},n.forEach((function(e){for(var t in e)o.style[t]=e[t]})),"function"==typeof __register_static_styles__&&__register_static_styles__(o._scopeId,n),e.exports=s},,function(e,t,i){var s,o,n=[];n.push(i(6)),s=i(7);var a=i(8);o=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(Object.keys(s).some((function(e){return"default"!==e&&"__esModule"!==e}))&&console.error("named exports are not supported in *.vue files."),o=s=s.default),"function"==typeof o&&(o=o.options),o.__file="/Users/WEIYI/wwwroot/dootask/resources/mobile/src/pages/index.vue",o.render=a.render,o.staticRenderFns=a.staticRenderFns,o._scopeId="data-v-57509004",o.style=o.style||{},n.forEach((function(e){for(var t in e)o.style[t]=e[t]})),"function"==typeof __register_static_styles__&&__register_static_styles__(o._scopeId,n),e.exports=s,e.exports.el="true",new Vue(e.exports)},function(e,t){e.exports={flex:{flex:1}}},function(e,t,i){"use strict";i.r(t);var s=i(3),o=i.n(s),n=app.requireModule("eeui"),a=app.requireModule("eeuiDeviceInfo"),r=app.requireModule("eeuiUmengPush"),u=app.requireModule("eeuiCommunication"),d=app.requireModule("eeuiNotifications"),c=app.requireModule("eeuiPicture"),l=app.requireModule("eeuiShareFiles");t.default={components:{Meetings:o.a},data:function(){return{uniqueId:"",resumeNum:0,umengInit:!1,umengMessage:{},umengError:!1,screenHeight:0,appGroupID:"group.im.dootask",appSubPath:"share"}},pageResume:function(){var e='if (typeof window.__onPageResume === "function"){window.__onPageResume('.concat(this.resumeNum,")}");this.$refs.web.setJavaScript(e),this.resumeNum++,this.refreshNotificationPermission(),this.umengError&&this.updateUmengAlias()},pagePause:function(){this.$refs.web.setJavaScript('if (typeof window.__onPagePause === "function"){window.__onPagePause()}')},pageMessage:function(e){var t=e.message;switch(t.messageType){case"notificationClick":break;case"keyboardStatus":var i=encodeURIComponent(this.jsonStringify(t)),s='if (typeof window.__onKeyboardStatus === "function"){window.__onKeyboardStatus("'.concat(i,'")}');this.$refs.web.setJavaScript(s)}},mounted:function(){this.screenHeight=WXEnvironment.deviceHeight,"ios"===WXEnvironment.platform.toLowerCase()&&l.shareFileWithGroupID(this.appGroupID,this.appSubPath),this.uniqueId=n.getCachesString("appUniqueId",""),this.count(this.uniqueId)<5&&(this.uniqueId=this.randomString(6),n.setCachesString("appUniqueId",this.uniqueId,0)),n.setStatusBarStyle(!1),this.$refs.web.setUrl(n.rewriteUrl("../public/index.html"))},computed:{},methods:{time:function(){return Math.round((new Date).getTime()/1e3)},onReceiveMessage:function(e){var t=e.message;switch(t.action){case"intiUmeng":this.umengInit||(this.umengInit=!0,r.initialize());break;case"setUmengAlias":this.umengMessage=t,this.updateUmengAlias();break;case"setVibrate":var i=this.runNum(t.time);i>0?a.setVibrate(i):a.setVibrate();break;case"getNotificationPermission":this.refreshNotificationPermission();break;case"setBdageNotify":d.setBadge(this.runNum(t.bdage));break;case"gotoSetting":d.gotoSet();break;case"callTel":u.call(t.tel);break;case"picturePreview":c.picturePreview(t.position,t.paths);break;case"videoPreview":c.videoPreview(t.path);break;case"userChatList":"ios"===WXEnvironment.platform.toLowerCase()?l.setShareStorage("chatList",t.url):n.setCaches("chatList",t.url,0);break;case"userUploadUrl":"ios"===WXEnvironment.platform.toLowerCase()?(l.setShareStorage("upLoadUrl",t.chatUrl),l.setShareStorage("fileUpLoadUrl",t.dirUrl)):(n.setCaches("upLoadUrl",t.chatUrl,0),n.setCaches("fileUpLoadUrl",t.dirUrl,0));break;case"startMeeting":this.$refs.meeting&&this.$refs.meeting.joint(t.meetingParams);break;case"meetingInfo":this.$refs.meeting&&this.$refs.meeting.updateMeetingInfo(t.infos)}},onStateChanged:function(e){var t=e.status,i=e.url;switch(t){case"createTarget":n.openPage({pageType:"app",pageTitle:" ",url:"web.js",params:{url:i,browser:!0,showProgress:!0}},(function(e){}))}},updateUmengAlias:function(){var e=this,t="".concat(WXEnvironment.platform,"-").concat(this.umengMessage.userid,"-").concat(this.uniqueId);eeuiLog.log("[UmengAlias] delete: "+t),r.deleteAlias(t,"userid",(function(i){eeuiLog.log("[UmengAlias] delete result: "+JSON.stringify(i)),eeuiLog.log("[UmengAlias] add: "+t),r.addAlias(t,"userid",(function(i){eeuiLog.log("[UmengAlias] add result: "+JSON.stringify(i)),"success"===i.status?(eeuiLog.log("[UmengAlias] add success"),n.ajax({url:e.umengMessage.url,method:"get",data:{alias:t},headers:{token:e.umengMessage.token}},(function(e){eeuiLog.log(e)}))):eeuiLog.log("[UmengAlias] add error"),e.umengError="success"!==i.status}))}))},refreshNotificationPermission:function(){var e=this;d.getPermissionStatus((function(t){var i='if (typeof window.__onPagePause === "function"){window.__onNotificationPermissionStatus('.concat(t,")}");e.$refs.web.setJavaScript(i)}))},endMeeting:function(){},invent:function(){}}}},function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:["flex"]},[t("web-view",{ref:"web",staticClass:["flex"],attrs:{hiddenDone:!0,progressbarVisibility:!1,allowFileAccessFromFileURLs:!0},on:{receiveMessage:this.onReceiveMessage,stateChanged:this.onStateChanged}}),t("meetings",{ref:"meeting",on:{endMeeting:this.endMeeting,invent:this.invent}})],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}]);